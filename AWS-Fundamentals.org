* Table of Contents :toc:
- [[#aws-public-vs-private-services][AWS Public vs Private Services]]
- [[#aws-global-infrastructure][AWS Global Infrastructure]]
  - [[#aws-regions][AWS Regions]]
  - [[#aws-edge-locations][AWS Edge Locations]]
  - [[#service-resilience][Service Resilience]]
- [[#virtual-private-cloud-vpc-basics][Virtual Private Cloud (VPC) Basics]]
  - [[#default-vpc-facts][Default VPC Facts]]
- [[#elastic-compute-cloud-ec2-basics][Elastic Compute Cloud (EC2) Basics]]
  - [[#amazon-machine-image-ami][Amazon Machine Image (AMI)]]
- [[#simple-storage-service-s3-basics][Simple Storage Service (S3) Basics]]
  - [[#objects][Objects]]
  - [[#buckets][Buckets]]
- [[#cloudformation-cfn-basics][CloudFormation (CFN) Basics]]
- [[#cloudwatch-basics][CloudWatch Basics]]
  - [[#namespace][Namespace]]
  - [[#metric][Metric]]
  - [[#datapoint][Datapoint]]
  - [[#dimension][Dimension]]
  - [[#alarm][Alarm]]

* AWS Public vs Private Services
AWS services can be categorized into two main types:
1. Public Services
   - Services that can be accessed using public endpoints (e.g., S3)
   - Can be accessed in the AWS public zone
2. Private Services
   - Can only be accessed through a VPC
     - VPCs are AWS private zones

* AWS Global Infrastructure

** AWS Regions
An area of the world that contains a full deployment of AWS infrastructure such as:
- Compute
- Storage
- Databases
- etc.

Three main benefits:
1. Geographic Separation - Isolated *Fault Domain*
2. Geopolitical Separation - Different *governance*
3. Location Control - Can tune architecture for *performance*

Inside every region, AWS provides multiple *Availability Zones (AZ)*. For example:
#+begin_src
  Region: ap-southeast-2
  AZs: ap-southeast-2a, ap-southeast-2b, ap-southeast-2c
#+end_src

AZs give isolated infrastructure inside a region with high speed low latency connections.

** AWS Edge Locations
Smaller than regions and generally only have content distribution services and some type of edge computing.

Useful for fast and efficient data transfer.

** Service Resilience
- Globally Resilient
- Region Resilient - replicate data in multiple AZs
- AZ Resilient - prone to failure if there are any problems in that specific AZ

* Virtual Private Cloud (VPC) Basics
- A virtual network inside AWS
- Regional service
- Within 1 account and 1 region
- Private and isolated by default unless decided/configured otherwise
- Two types - Default VPC (1 per region) and Custom VPCs (can more than 1)
  - Custom VPCs require the user to configure everything end-to-end in detail
  - Private by default
- Every VPC is allocated a range of IP addresses called the ~VPC CIDR~
  - Defines the start and end range the VPC can use
  - Custom VPCs can have multiple CIDR ranges
  - Default VPC only gets 1 CIDR range and it always the same: ~172.31.0.0/16~
- Each subnet of are subdivided in 1 availability zone
  - With Default VPC, it is preconfigured to have 1 subnet in every AZ in that region

** Default VPC Facts
- One per region - can be removed & recreated
- Default VPC CIDR is always ~172.31.0.0/16~
- ~/20~ subnet in each AZ in the region (higher slash number == smaller network)
- Provided with ~Internet Gateway (IGW)~, ~Security Group~, & ~NACL~
- Subnets assign public IPv4 addresses

It is best practice to not use the default VPC.

* Elastic Compute Cloud (EC2) Basics
- EC2 is an IaaS (Infrastructure as a Service) that provides access to *virtual machines* known as *instances*.
- *Private* service by default - uses VPC networking; runs in the private AWS zone.
- AZ resilient because an instance is launced in a specific subnet
- There are different types of instances for different sizes and capabilities
- On-demand billing - per second/hour (depending on the type of instance)
- Uses different types of storage
  1. Local on-host storage (local storage of that instance)
  2. Elastic block storage (network storage made available to that instance)
- An instance has an attribute called *state* with the following values:
  - Running
    - CPU, Memory, Storage/Disk, Networking are all being used (included for computing cost)
  - Stopped
    - Only Disk is being consumed (still charged for storage)
  - Terminated
    - Deletes the instance with its resources & allocated storage

** Amazon Machine Image (AMI)
- Image of an EC2 instance
- Can be used to create an EC2 instance or be created from an EC2 instance
- Contains the following:
  - Attached permissions
    - Can be set to public -- everyone is allowed to launch instances from that AMI
    - Owner -- implicitly allowed to create instances from that AMI
    - Explicit permissions -- specific AWS account allowed
  - Root Volume
    - Drive that boots the OS
  - Block Device Mapping

* Simple Storage Service (S3) Basics
- Global storage platform - regional based
- Public service; runs on AWS public zone
- Can have unlimited data and multi-user usage of that data
- Perfect for hosting large amounts of data
- Economical
- Can be accessed via different methods

S3 has two main things that it delivers:
1. Objects
   - Data that S3 stores
2. Buckets
   - Containers for objects

** Objects
Made up of 2 main components:
1. Object key (similar to a file name)
2. Value: data/content of the object
   - Size can be from 0 bytes - 5TB

** Buckets
- Created in a *region*.
  - Data in that bucket does not leave that region unless configured.
  - Failure is also contained within that region.
- Buckets are identified by its name which needs to be *globally unique*
- Can hold *unlimited* objects.
- Data are stored in a flat structure.
  - AWS shows "folders" in the UI but those are not technically folders/directories.
  - Object names with a prefix/es are represented by AWS in the UI to be in a folder but are really stored in the same level as any other objects in the bucket.
- 100 buckets *soft limit*
- 1000 buckets *hard limit*

Deleting buckets is a 2-step process:
1. Empty the bucket
2. Delete bucket

* CloudFormation (CFN) Basics
- IAC within AWS
- Can be created with either YAML or JSON
- ~Resources~ is the only mandatory part of the template
  - each resource in ~Resources~ are called *logical resources*
    - Has a ~type~ that CFN uses to know what to create
    - Have ~properties~ for configuration of the resource
- ~Metadata~ dictates how the console UI presents the template
- ~Parameters~ additional fields for resources (e.g., instance size, # of AZs)
- ~Mappings~ creates lookup tables
- ~Conditions~ creates decision making in the template
- ~Outputs~ presents outputs on what is being created, updated, or deleted
- When a template is given to CFN, it creates a *stack* that contains all the logical resources that the template tells it to contain
  - For every resource in the stack, CFN makes a physical resource in the acccount

#+begin_src YAML
  AWSTemplateFormatVersion: "version date"

  Description:
    String (should be followed by the AWSTemplateFormatVersion if the format version is specified)

  Metadata:
    template of metadata

  Parameters:
    set of parameters

  Mappings:
    set of mappings

  Conditions:
    set of conditions

  Transform:
    set of transforms

  Resources:
    set of resources

  Outputs:
    set of outputs
#+end_src

* CloudWatch Basics
- Collects and manages operational data
- Think of CloudWatch as three main products in one:
  1. *Metrics* (CloudWatch itself) - AWS Products, Apps, on-premises
  2. CloudWatch *Logs* - AWS Products, Apps, on-premises
  3. CloudWatch *Events* - AWS Services & Schedules

** Namespace
- Container for monitoring data.
- Have a name -- can be anything as long as it stays within the rule set for namespace names.
  - One exception -- all AWS data goes into an AWS namespace called ~AWS/<service-name>~ (e.g., ~AWS/EC2~)
- Contain related metrics

** Metric
- Collection of related data points in a time ordered structure.
- Not for a specific server (e.g., CPU utilization metric can be received from multiple EC2 instances)

** Datapoint
- Consists of:
  1. Timestamp
  2. Value

** Dimension
- Name-value pairs that separate datapoints for different things or perspective within the same metric.

** Alarm
- Created and linked to a specific metric.
- Based on how it is configured, an action will be taken based on that metric.

* Shared Responsibility Model

** Customer-Vendor Responsibility Model
Legend:
- C: Customer
- V: Vendor

| INFRASTRUCTURE STACK | ON PREMISES | DC HOSTED | IaaS | PaaS | SaaS |
|----------------------+-------------+-----------+------+------+------|
| Interface            | C           | C         | C    | C    | V    |
| Application          | C           | C         | C    | C    | V    |
| Data                 | C           | C         | C    | C    | V    |
| Runtime              | C           | C         | C    | V    | V    |
| Container            | C           | C         | C    | V    | V    |
| O/S                  | C           | C         | C    | V    | V    |
| Hypervisor           | C           | C         | V    | V    | V    |
| Servers              | C           | C         | V    | V    | V    |
| Infrastructure       | C           | C         | V    | V    | V    |
| Facilities           | C           | V         | V    | V    | V    |

** AWS Shared Responsibility Model

Responsibility of AWS:
- Security *of* the cloud
  - Hardware/AWS Global Infrastructure
    - Regions
    - Availability Zones
    - Edge Locations
  - Compute
  - Storage
  - Database
  - Networking
  - Software that assists with the services

Responsibility of the customer:
- Security *in* the cloud
  - Client-side data encryption, integrity & authenication
  - Server-side encryption (file system and/or data)
  - Networking traffic protection (encryption, integrity, identity)
  - OS, network & firewall configuration
  - Platform, applications, identity & access management
  - Customer data

* High Availability vs Fault-Tolerance vs Disaster Recovery

* Route53 Basics

* DNS Record Types
